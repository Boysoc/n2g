---
import Layout from "@layouts/Layout.astro";
import Header from "@components/Header.astro";
import Footer from "@components/Footer.astro";
import Sidebar from "@components/Sidebar.astro";
import Comment from "@components/Comment.astro";
import type { CollectionEntry } from "astro:content";

export interface Props {
  post: CollectionEntry<"blog">;
}

const { post } = Astro.props;

const { title, description, ogImage, canonicalURL, pubDatetime, tags } = post.data;

const { Content } = await post.render();

function formatDate(date: Date): string {
  return date.toLocaleDateString('zh-CN', { 
    year: 'numeric', 
    month: 'long', 
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  });
}
---

<Layout
  title={title}
  description={description}
  ogImage={ogImage}
  canonicalURL={canonicalURL}
>
  <div class="side-click icon-arrow-down"></div>
  <div class="move-block">
    <Header />
    <div id="body">
      <div class="container">
        <div class="col-group">
          <div class="col-8" id="main">
            <div class="res-cons">
              <article class="post single-page">
                <date class="post-meta">
                  {formatDate(new Date(pubDatetime))}
                </date>
                <header>
                  <h1 class="post-title">{title}</h1>
                </header>
                <div class="post-content">
                  <Content />
                </div>
              </article>
              <Comment />
            </div>
          </div>
          <Sidebar />
        </div>
      </div>
    </div>
    <Footer />
  </div>
</Layout>


