import"./hoisted.lrI1EPAS.js";import"./hoisted.FddQO928.js";document.addEventListener("DOMContentLoaded",()=>{const c=document.getElementById("expand-toggle-btn"),r=document.getElementById("friend-links-container");document.getElementById("toggle-icon");const l=c?.querySelector(".toggle-text");c&&r&&c.addEventListener("click",()=>{if(r.classList.contains("expanded"))r.classList.remove("expanded"),l.textContent="展开";else{r.classList.add("expanded"),l.textContent="收起";const n=document.querySelectorAll(".tab-item"),e=document.querySelectorAll(".content-card");n.length>0&&e.length>0&&!n[0].classList.contains("active")&&(n[0].classList.add("active"),e[0].classList.add("active"))}});const s=document.querySelectorAll(".tab-item"),m=document.querySelectorAll(".content-card");function d(t){const n=t.getAttribute("data-target");s.forEach(o=>{o.classList.remove("active")}),m.forEach(o=>{o.classList.remove("active")}),t.classList.add("active");const e=document.getElementById(n);e&&e.classList.add("active")}s.forEach(t=>{t.addEventListener("click",()=>{d(t)})}),document.querySelectorAll(".copy-btn").forEach(t=>{t.addEventListener("click",async()=>{const n=t.getAttribute("data-copy");if(n)try{await navigator.clipboard.writeText(n);const e=t.textContent;t.textContent="已复制",t.style.backgroundColor="rgba(207, 79, 40, 0.1)",t.style.borderColor="#cf4f28",t.style.color="#cf4f28",setTimeout(()=>{t.textContent=e,t.style.backgroundColor="",t.style.borderColor="",t.style.color=""},1e3)}catch(e){console.error("复制失败:",e),t.textContent="复制失败",setTimeout(()=>{t.textContent="复制"},2e3)}})});const h=document.getElementById("random-visit-button");h&&h.addEventListener("click",function(t){const n=document.querySelectorAll(".modern-card"),e=Array.from(n).filter(a=>!a.classList.contains("inactive"));if(e.length===0||n.length===0)return;this.disabled=!0,this.querySelector(".action-label").textContent="选择中...";const o=Math.floor(Math.random()*e.length);let i=0,g=0;const v=2;let u=30;const f=()=>{if(e.forEach(a=>{a.classList.remove("highlight","selected")}),e[i].classList.add("highlight"),i=(i+1)%e.length,i===0&&(g++,u+=40),g>=v){e[o].classList.remove("highlight"),e[o].classList.add("selected");const y=e[o].href;y&&window.open(y,"_blank","noopener,noreferrer"),setTimeout(()=>{this.disabled=!1,this.querySelector(".action-label").textContent="随机访问",e.forEach(x=>{x.classList.remove("highlight","selected")})},2e3);return}setTimeout(f,u)};f()})});document.addEventListener("astro:after-swap",()=>{setTimeout(()=>{const c=document.getElementById("expand-toggle-btn"),r=document.getElementById("friend-links-container"),l=c?.querySelector(".toggle-text");c&&r&&c.addEventListener("click",()=>{if(r.classList.contains("expanded"))r.classList.remove("expanded"),l.textContent="展开";else{r.classList.add("expanded"),l.textContent="收起";const n=document.querySelectorAll(".tab-item"),e=document.querySelectorAll(".content-card");n.length>0&&e.length>0&&!n[0].classList.contains("active")&&(n[0].classList.add("active"),e[0].classList.add("active"))}});const s=document.querySelectorAll(".tab-item"),m=document.querySelectorAll(".content-card");function d(t){const n=t.getAttribute("data-target");s.forEach(o=>{o.classList.remove("active")}),m.forEach(o=>{o.classList.remove("active")}),t.classList.add("active");const e=document.getElementById(n);e&&e.classList.add("active")}s.forEach(t=>{t.addEventListener("click",()=>{d(t)})}),document.querySelectorAll(".copy-btn").forEach(t=>{t.addEventListener("click",async()=>{const n=t.getAttribute("data-copy");if(n)try{await navigator.clipboard.writeText(n);const e=t.textContent;t.textContent="已复制",t.style.backgroundColor="rgba(207, 79, 40, 0.1)",t.style.borderColor="#cf4f28",t.style.color="#cf4f28",setTimeout(()=>{t.textContent=e,t.style.backgroundColor="",t.style.borderColor="",t.style.color=""},1e3)}catch(e){console.error("复制失败:",e),t.textContent="复制失败",setTimeout(()=>{t.textContent="复制"},2e3)}})});const h=document.getElementById("random-visit-button");h&&h.addEventListener("click",function(t){const n=document.querySelectorAll(".modern-card"),e=Array.from(n).filter(a=>!a.classList.contains("inactive"));if(e.length===0||n.length===0)return;this.disabled=!0,this.querySelector(".action-label").textContent="选择中...";const o=Math.floor(Math.random()*e.length);let i=0,g=0;const v=2;let u=30;const f=()=>{if(e.forEach(a=>{a.classList.remove("highlight","selected")}),e[i].classList.add("highlight"),i=(i+1)%e.length,i===0&&(g++,u+=40),g>=v){e[o].classList.remove("highlight"),e[o].classList.add("selected");const y=e[o].href;y&&window.open(y,"_blank","noopener,noreferrer"),setTimeout(()=>{this.disabled=!1,this.querySelector(".action-label").textContent="随机访问",e.forEach(x=>{x.classList.remove("highlight","selected")})},2e3);return}setTimeout(f,u)};f()})},100)});function E(){const c=document.getElementById("random-visit-button");c&&!c.hasAttribute("data-initialized")&&(c.setAttribute("data-initialized","true"),c.addEventListener("click",function(r){const l=document.querySelectorAll(".modern-card"),s=Array.from(l).filter(e=>!e.classList.contains("inactive"));if(s.length===0||l.length===0)return;this.disabled=!0,this.textContent="选择中...";const m=Math.floor(Math.random()*s.length);let d=0,L=0;const h=2;let t=30;const n=()=>{if(s.forEach(e=>{e.classList.remove("highlight","selected")}),s[d].classList.add("highlight"),d=(d+1)%s.length,d===0&&(L++,t+=40),L>=h){s[m].classList.remove("highlight"),s[m].classList.add("selected");const o=s[m].href;o&&window.open(o,"_blank","noopener,noreferrer"),setTimeout(()=>{this.disabled=!1,this.textContent="随机访问",s.forEach(i=>{i.classList.remove("highlight","selected")})},2e3);return}setTimeout(n,t)};n()}))}E();document.addEventListener("astro:after-swap",()=>{setTimeout(E,100)});
